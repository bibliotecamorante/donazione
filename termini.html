<!DOCTYPE html>
<html lang="it">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#970a2c">
   <meta name="description" content="Termini e condizioni per donazioni di libri ad Ostia.">

   <title>Termini donazione</title>

   <link rel="icon" href="favicon.png" type="image/png">
   <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
   <style>
       * {
           max-width: 100%;
           box-sizing: border-box;
       }

       html, body {
           width: 100%;
           margin: 0;
           padding: 0;
           overflow-x: hidden;
       }

       :root {
           --primary: #970a2c;
           --text: #180207;
           --bg: #f3f4f6;
       }
       
       body {

          font-weight: 500; /* Imposta il peso del font a 500 */
           background-color: var(--bg);
           color: var(--text);
           font-family: 'Space Grotesk', sans-serif;
           font-size: 22px; /* Ridotto da 22px */
           line-height: 32px; /* Ridotto da 34px */
           letter-spacing: normal;
           word-spacing: 0px;
       }
       
.top-banner {
    background-color: white;
    padding: 0.8rem 2rem; /* Ridotto da 1.2rem */
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-height: 60px; /* Ridotto da 80px */
}


.top-banner a {
    border-bottom: none;
    display: flex;
    align-items: center;
}

.top-banner a:hover {
    border-bottom: none;
}

.roma-logo {
    height: 40px;
    display: block;
}

       .social-icons {
           display: flex;
           gap: 1rem;
           justify-content: flex-end;
           align-items: center;
       }

       .social-icons a {
           color: var(--primary);
           font-size: 1.5rem;
           transition: transform 0.3s ease;
       }

       .social-icons a:hover {
           transform: scale(1.2);
       }
       
       header {
           background-color: var(--primary);
           color: #fff;
           padding: 2rem 0;
           min-height: 4cm;
           display: flex;
           justify-content: center;
           align-items: center;
           position: relative;
           flex-direction: column;
           text-align: center;
       }

 .container-header {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0.8rem; /* Ridotto da 2rem */
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    flex-wrap: wrap;
    gap: 1rem;
    min-height: 70px; /* Ridotto da 120px */
}

      .library-name {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text);
    font-size: 1.1rem; /* Ridotto da 1.4rem */
    margin-bottom: 1rem;
}

.library-name a {
   position: relative;
    border-bottom: none; /* Rimuove la sottolineatura esistente */
}

.library-name a:hover {
    border-bottom: none; /* Previene la sottolineatura al hover */
    text-decoration: none; /* Assicura che non ci sia sottolineatura */
}

       .library-name img {
           height: 22px;
           width: 22px;
           vertical-align: middle;
       }

    
.library-name a.tooltip-library:hover::before {
  content: "Clicca qui per vedere gli appuntamenti della biblioteca";
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 2px 6px; /* Ridotto ulteriormente il padding verticale */
  background-color: #fff;
  color: #333;
  border-radius: 3px; /* Ridotto il raggio per armonizzare con l'altezza */
  box-shadow: 0 1px 3px rgba(0,0,0,0.2); /* Ombra meno pronunciata */
  white-space: nowrap;
  z-index: 1000;
  font-size: 12px; /* Ridotta la dimensione del font */
  margin-bottom: 5px;
}

     

      .content-wrapper {
    max-width: 900px;
    width: 100%;
    margin: 2rem auto;
    padding: 0 1rem;
    position: relative;
    margin-top: 60px;
}

.nav-icons {
    position: absolute;
    top: -60px;
    left: 50%;
    transform: translateX(-50%); /* Semplificato il transform */
    display: flex;
    align-items: center;
    gap: 3rem;
    padding-top: 20px;
    visibility: visible;
    opacity: 1;
}
      

@media (max-width: 1400px) {
    .nav-icons {
        transform: translateX(calc(-50% - 300px));
    }
}

@media (max-width: 1200px) {
    .nav-icons {
        transform: translateX(calc(-50% - 200px));
    }
}

@media (max-width: 992px) {
    .nav-icons {
        transform: translateX(calc(-50% - 100px));
    }
}

@media (max-width: 768px) {
    .nav-icons {
        position: relative;
        left: 0;
        top: 0;
        transform: none;
        justify-content: flex-start;
    }
}



      
    .nav-icons a {
    display: flex;
    align-items: center;
    visibility: visible;
    opacity: 1;
    text-decoration: none;
    border-bottom: none;
       
}

       .nav-icons a:hover {
           transform: scale(1.1);
          text-decoration: none;
          border-bottom: none;
       }

       .nav-icons a:first-child {
           font-weight: bold;
           font-size: 1.8rem;
           position: relative;
           letter-spacing: 0.5rem;
       }

       .nav-icons a:first-child::after {
           content: '';
           position: absolute;
           left: calc(100% + 1.5rem);
           top: 50%;
           transform: translateY(-50%);
           height: 20px;
           width: 1px;
           background-color: rgba(128, 128, 128, 0.3);
       }
       
       header img {
           height: 70px;
           max-width: 100%;
       }

       header .logo-morante {
           height: 180px;
           filter: none;
           max-width: 100%;
       }
       
       main {
           max-width: 800px;
           margin: 2rem auto;
           padding: 2rem;
           background-color: #fff;
           border-radius: 12px;
           box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
       }
       
       main h1 {
           color: var(--primary);
           font-size: 2rem; /* Ridotto da un valore precedente */
        margin-bottom: 1.5rem; /* Riduce la distanza sotto il titolo */
    line-height: 1.2; /* Rende il titolo meno alto */
       }
       
       h2 {
           color: var(--primary);
           font-size: 1.7rem; /* Ridotto da 1.8rem */
           margin-bottom: 2rem;
           padding-bottom: 0.5rem;
           border-bottom: 2px solid var(--primary);
       }
       
       ul {
           list-style-type: none;
           padding-left: 0;
       }
       
       ul li {
           padding: 0.7rem 0; /* Ridotto da 0.7rem */
           position: relative;
           padding-left: 1.5rem;
       }
       
       ul li::before {
           content: "•";
           color: var(--primary);
           font-weight: bold;
           position: absolute;
           left: 0;
       }
       
       p {
           margin-bottom: 1.7rem; /* Ridotto da 1.8rem */
       }
       
    a {
    color: var(--primary);
    text-decoration: none; /* Rimuove la sottolineatura per tutti i link */
    border-bottom: none; /* Rimuove eventuali bordi inferiori */
    transition: color 0.3s ease; /* Transizione per un effetto più fluido */
}

a:hover {
    color: #e57373 !important; /* Rosso chiaro, Cambia il colore al passaggio del mouse */
    text-decoration: none !important; /* Assicura che non venga sottolineato */
    border-bottom: none; /* Rimuove eventuali bordi aggiuntivi */
}


/* Escludi i link all'interno delle icone social */
.social-icons a:hover {
    color: var(--primary) !important; /* Mantiene il colore originale */
}



      

footer {
    background-color: var(--primary);
    color: #FFFFFF;
    font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    font-size: 14px;
    font-weight: 400;
    padding: 2.5rem 0; /* Aumentato da 1.5rem a 2.5rem per maggiore altezza */
}

footer .container {
    width: 80%; /* Ridotto da 95% a 80% per aumentare i margini laterali */
    margin: 0 auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    gap: 2rem;
}

footer img {
    height: 35px;
    max-width: 100%;
    cursor: pointer;
}

footer .info {
    display: flex;
    flex-wrap: wrap;
    gap: 3.5rem;
    font-size: 0.85rem;
    color: #FFFFFF;
}

footer .info div {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
}

footer .info i {
    color: #FFFFFF;
    font-size: 1.1rem;
    margin-top: 0.2rem;
}

footer .info span {
    display: flex;
    flex-direction: column;
    gap: 0.1rem;
    line-height: 1.2;
}

footer .info div:nth-child(2) span {
    flex-direction: row;
    gap: 0.3rem;
    white-space: nowrap;
}

footer .info a {
    color: #FFFFFF !important;
    text-decoration: none;
}

footer .info .block {
    display: block;
    margin: 0;
}

/* Mantieni le regole mobili ma ripristina la larghezza del container per schermi piccoli */
@media (max-width: 768px) {
    footer {
        padding: 2rem 0; /* Mantiene un padding più contenuto per mobile */
    }

    footer .container {
        width: 95%; /* Ripristina la larghezza originale per schermi piccoli */
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    footer .info {
        flex-direction: column;
        gap: 1rem;
        align-items: center;
    }

    footer .info div {
        flex-direction: column;
        text-align: center;
    }

    footer .info div:nth-child(1) {
        flex-direction: row;
        justify-content: center;
        gap: 0.5rem;
        align-items: center;
    }

    footer .info div:nth-child(2),
    footer .info div:nth-child(3) {
        flex-direction: row;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
    }

    footer .info div:nth-child(2) span,
    footer .info div:nth-child(3) span {
        display: inline-block;
    }
}
      
           
           header {
               min-height: auto;
               padding: 1rem 0;
               display: flex;
               flex-direction: column;
           }
           
           .nav-icons {
               position: relative;
               top: 0;
               left: 0;
               padding: 0.5rem 0;
               justify-content: center;
           }
           
           .container {
               padding: 0.5rem;
               flex-direction: row;
               justify-content: center;
               align-items: center;
               gap: 1.5rem;
               width: 100%;
           }
           
           header img {
               height: 37px;
           }
           
           header .logo-morante {
               height: 87px;
           }
           
           main {
               margin: 1rem;
               padding: 1.5rem;
           }

           .footer-info {
               flex-direction: column;
           }
       }

       @media print {
           .top-banner, header, .nav-icons, footer {
               display: none;
           }

           main {
               box-shadow: none;
               border: none;
               padding: 0;
               margin: 0;
           }
       }





      

            
/* Audio control button styles */
.audio-control-container {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 20px 0;
    position: relative; /* Necessario per posizionare la tooltip */
}


/* Stile aggiornato per il controllo audio */
.audio-control {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary);
    border: none;
    cursor: pointer;
    font-size: 20px;
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    padding: 0;
    transition: background-color 0.3s ease;
    position: relative; /* Per il posizionamento relativo della tooltip */
}


.audio-control .tooltip {
    position: absolute;
    bottom: 120%; /* Posiziona sopra il pulsante */
    left: 50%;
    transform: translateX(-50%);
    background-color: #fff; /* Sfondo bianco */
    color: #333; /* Testo grigio */
    padding: 0.5rem 1rem; /* Padding per spazio interno */
    border-radius: 8px;
    font-size: 0.8rem;
    white-space: nowrap; /* Evita il taglio del testo */
    max-width: 200px; /* Limita la larghezza massima */
    border: 1px solid #ddd; /* Bordo sottile */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    z-index: 10;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Ombra leggera */
}

.audio-control:hover .tooltip {
    opacity: 1;
    visibility: visible;
}


      

.audio-control:hover {
    background-color: #800624; /* Versione più scura del colore primario */
}

.audio-control .fa-headphones,
.audio-control .fa-play,
.audio-control .fa-pause {
    color: white;
}

.audio-control:hover .fa-headphones {
    display: none;
}

.audio-control:hover .fa-play {
    display: inline;
}


.fa-play {
    display: none;
}

/* Aggiorna il colore del testo "ascolta l'audio" per mantenerlo coordinato */
.audio-label {
    color: var(--primary);
    font-size: 0.85rem;
}

.waveform-container {
    display: none;
    position: relative;
    height: 60px;
    background: #f5f5f5;
    border-radius: 4px;
    padding: 10px;
    margin: 10px 0;
    cursor: pointer;
}

.waveform-bars {
    display: flex;
    align-items: flex-end;
    height: 40px;
    gap: 1px;
}

.waveform-bar {
    flex: 1;
    background: #ddd;
    min-width: 2px;
    transition: height 0.1s ease;
}

.waveform-bar.played {
    background: #970a2c;
}
.time-display {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    margin-top: 5px;
}





      
      
/* Base tooltip container */
.tooltip-container {
    position: relative;
    display: inline-block;
}

/* Base tooltip style */
.tooltip-container::after {
    content: "Questo link si apre in una nuova finestra";
    position: absolute;
    background-color: white;
    color: #666;
    padding: 4px 12px;
    line-height: 1.3;
    border-radius: 4px;
    font-size: 13px;
    font-style: italic;
    white-space: nowrap;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    border: 1px solid #ddd;
    z-index: 100000;
}

/* Show tooltip on hover */
.tooltip-container:hover::after {
    visibility: visible;
    opacity: 1;
}

/* Social icons tooltips */
.social-icons .tooltip-container::after {
    bottom: -40px;
    left: -150% !important;  /* Spostato molto più a sinistra */
    transform: translateX(-50%);
    top: auto;
    background-color: white !important;
}

/* Specific targeting for Roma logo tooltip */
.top-banner > a.tooltip-container::after {
    bottom: -40px !important;
    top: auto !important;
    left: 85% !important;
    transform: translateX(-50%) !important;
    position: absolute !important;
    background-color: white !important;
    height: 24px !important;
    line-height: 1 !important;
    display: flex !important;
    align-items: center !important;
}

/* Top banner positioning */
.top-banner {
    position: relative;
    z-index: 1;
}




a {
    text-decoration: none;
    color: var(--primary);
}

a:hover {
    text-decoration: none;
    color: #c0c0c0;
}


@media (max-width: 768px) {
    .tooltip-container::before,
    .tooltip-container::after,
    .tooltip-library:hover::before,
    .tooltip {
        display: none !important;
    }
} 
      

/* Aggiungi questo CSS dopo lo stile esistente, prima della chiusura del tag style */

@media screen and (max-width: 767px) {
    /* Modifica dell'header per mobile */
    header {
        background-color: #970a2c;  /* amaranto */
        height: 130px;               /* altezza dimezzata */
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Gestione dei loghi nell'header */
    .container-header {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Nascondi il logo Morante su mobile */
    .container-header img[src="logomorante.png"] {
        display: none;
    }

    /* Ridimensiona il logo bianco per mobile */
    .container-header img[src="logobianco.png"] {
        height: 35px;  /* Altezza dimezzata rispetto ai 70px originali */
        width: auto;
        max-width: 100%;
    }
}   



@media (max-width: 768px) {
    .top-banner {
        padding: 0.4rem 1rem; /* Reduced padding */
        min-height: 40px; /* Reduced minimum height */
    }
    
    .roma-logo {
        height: 35px; /* Reduced logo size */
    }
    
    /* Rimosso il codice che modificava le dimensioni delle icone social */
    .social-icons {
        gap: 1rem; /* Mantenuto il gap originale */
    }
}



      
   </style>
</head>
<body>
   <div class="top-banner">
        <a href="https://culture.roma.it/" class="tooltip-container" target="_blank" rel="noopener noreferrer">
    <img src="roma.png" alt="Logo Roma" class="roma-logo">
</a>

        <div class="social-icons">
            <a href="https://www.facebook.com/biblioteca.elsamorante?locale=it_IT" target="_blank" aria-label="Facebook" class="tooltip-container">
                <i class="fab fa-facebook"></i>
            </a>
            <a href="https://www.instagram.com/bibliotecaelsamorante/" target="_blank" aria-label="Instagram" class="tooltip-container">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="https://x.com/bibliomorante" target="_blank" aria-label="X" class="tooltip-container">
                <i class="fab fa-x-twitter"></i>
            </a>
            <a href="https://www.youtube.com/@bibliotecaelsamorante1172/featured" target="_blank" aria-label="YouTube" class="tooltip-container">
                <i class="fab fa-youtube"></i>
            </a>
        </div>
    </div>

  <header>
    <div class="container-header">
        <a href="https://www.bibliotechediroma.it/opac/.do">
            <img src="logobianco.png" alt="Logo Biblioteche di Roma" style="height: 70px; max-width: 100%;">
        </a>
        <a href="https://www.bibliotechediroma.it/opac/library/Biblioteca%20Elsa%20Morante/RMBO2">
            <img src="logomorante.png" alt="Logo Biblioteca Morante" style="height: 180px; max-width: 100%;">
        </a>
    </div>
  </header>

  <div class="content-wrapper">
        <div class="nav-icons">
            <a href="https://www.bibliotechediroma.it/opac/news/donazioni/33158" title="Indietro">
                <img src="left.svg" alt="Indietro" style="height: 22px; width: 22px;">
            </a>
            <a href="https://www.bibliotechediroma.it/opac/.do" title="Home">
                <img src="home.svg" alt="Home" style="height: 22px; width: 22px;">
            </a>
        </div>

        <main>
            
           
<div class="library-name">
  <a href="https://www.openstreetmap.org/?mlat=41.7325117&mlon=12.2718834&zoom=18" target="_blank">
    <img src="location.svg" alt="Location">
  </a>
  <a href="https://www.bibliotechediroma.it/opac/library/Biblioteca%20Elsa%20Morante/RMBO2" target="_blank" class="tooltip-library"> Biblioteca Elsa Morante </a>
</div>


           
<!-- Add this right after the library-name div in your HTML -->
<div class="text-controls">
<div class="audio-control-container">
  <button class="audio-control" id="audioControl">
    <i class="fas fa-headphones"></i>
    <i class="fas fa-play"></i>
    <span class="tooltip">Ascolta l'audio</span>
  </button>
  <span class="audio-label">Ascolta l'audio</span>
</div>


  
   
<div class="waveform-container">
    <div class="waveform-bars"></div>
    <div class="time-display">
        <span id="currentTime">0:00</span>
        <span id="totalTime">0:00</span>
    </div>
</div>

            <h1>Donazione di libri</h1>
            <section>
                <h2>Criteri di Accettazione</h2>
                <p>
                    L'acquisizione della donazione è subordinata ai seguenti criteri:
                </p>
                <ul>
                    <li>Gestione coerente e omogenea delle collezioni</li>
                    <li>Sostenibilità del trattamento catalografico</li>
                    <li>Disponibilità effettiva di spazio</li>
                </ul>
                
                <h2>Materiale Non Accettato</h2>
                <ul>
                    <li>Libri in cattivo stato, sottolineati o danneggiati</li>
                    <li>Opere già presenti nel Sistema "Biblioteche di Roma"</li>
                    <li>Materiale obsoleto o superato nei contenuti</li>
                    <li>Enciclopedie e opere giuridiche non aggiornate</li>
                    <li>Dizionari con più di quattro anni</li>
                    <li>Testi propagandistici o dottrinali</li>
                    <li>Libri scolastici</li>
                    <li>Riviste e periodici</li>
                    <li>Guide turistiche datate</li>
                    <li>Saggi in lingua originale</li>
                    <li>Documenti autoprodotti</li>
                    <li>Manuali di informatica non recenti</li>
                    <li>Supporti multimediali obsoleti</li>
                    <li>Fumetti da edicola</li>
                    <li>Collane economiche da edicola</li>
                    <li>Tesi di laurea</li>
                </ul>

                <h2>Procedura di Donazione</h2>
                <p>
                    Per valutare i titoli, ti preghiamo di seguire questi passaggi:
                </p>
                <ol>
                    <li>
                        Compila l'apposito 
                        <a href="https://bibliotecamorante.github.io/donazione/" 
                           target="_blank"
                           style="color: var(--primary); font-weight: bold;">modulo</a>.
                    </li>
                    <li>
                        Clicca sul pulsante 
                        <em>Invia Donazione</em> 
                        per trasmettere la tua richiesta alla biblioteca.
                    </li>
                </ol>
               
               <h2>Consegna del materiale</h2>
                <p>
                    Il materiale offerto in dono si potrà consegnare al <em>Front-Office</em> nei seguenti orari: dal lunedì al venerdì, dalle 09:00 alle 18:30, e il sabato dalle 09:00 alle 13:00. 
                </p>
               
               <h2>Rinuncia al diritto di rivendicazione</h2>

               
               
               <p>
                    Le opere accettate entreranno a far parte del patrimonio della biblioteca e non potranno essere reclamate. La catalogazione seguirà i tempi stabiliti dalla biblioteca secondo le priorità interne.
                </p>
                <p>
                   Il materiale non idoneo per la biblioteca potrà essere destinato ad altri utilizzi che la biblioteca riterrà opportuni (donazione, scambi o bookcrossing), senza alcun vincolo per quest'ultima.
                </p>

                

                <h2>Ulteriori Informazioni</h2>
                <p>
                    Sezione Adulti: <a href="mailto:l.daniello@bibliotechediroma.it">l.daniello@bibliotechediroma.it</a><br>
                    Sezione Ragazzi: <a href="mailto:f.ferri@bibliotechediroma.it">f.ferri@bibliotechediroma.it</a>
                </p>


<h2>Informativa sulla Privacy</h2>
<p>
    I dati personali raccolti attraverso il modulo di donazione saranno trattati esclusivamente per la gestione della donazione di libri, nel rispetto del Regolamento UE 2016/679 (GDPR). I dati non saranno condivisi con terze parti e saranno conservati solo per il tempo necessario al completamento della donazione.
</p>




               
            </section>
        </main>
    </div>

    






<footer>
    <div class="container">
        <img src="footermorante.png" alt="Logo Biblioteca Morante" 
             style="cursor: pointer;" 
             onclick="window.open('https://www.bibliotechediroma.it/opac/library/Biblioteca%20Elsa%20Morante/RMBO2', '_blank');">
        <div class="info">
            <div>
                <i class="fas fa-location-dot"></i>
                <span>
                    Via Adolfo Cozza 7
                    <span class="block">Municipio X, 00121 Roma</span>
                </span>
            </div>
            <div>
                <i class="fas fa-phone"></i>
                <span>
                    <a href="tel:+390645460481">06 4546 0481</a> / 
                    <a href="tel:+390645460483">0483</a>
                </span>
            </div>
            <div>
                <i class="fas fa-clock"></i>
                <span>
                    Lunedì-Venerdì 09:00-18:30
                    <span class="block">Sabato 09:00-13:00</span>
                </span>
            </div>
        </div>
    </div>
</footer>


   
   

   <script>
let speech = null;
let isPlaying = false;
let currentIndex = 0;
let startTime = 0;
let pauseTime = 0;
let totalDuration = 0;
let isDragging = false;

function formatTime(seconds) {
    const minutes = Math.floor(seconds / 60);
    const remainingSeconds = Math.floor(seconds % 60);
    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
}

function calculateTotalDuration() {
    let totalText = '';
    document.querySelectorAll('h1, h2, p, li').forEach(el => {
        totalText += el.textContent + ' ';
    });
    totalDuration = (totalText.split(' ').length * 0.4);
    document.getElementById('totalTime').textContent = formatTime(totalDuration);
}

function createWaveform() {
    const container = document.querySelector('.waveform-bars');
    // Riduciamo il numero di barre da creare
    const numberOfBars = 50; // Prima era probabilmente > 100

    for (let i = 0; i < numberOfBars; i++) {
        const bar = document.createElement('div');
        bar.className = 'waveform-bar';
        const height = 5 + Math.random() * 35;
        bar.style.height = `${height}px`;
        container.appendChild(bar);
    }
}

function updateWaveform(progress) {
    const bars = document.querySelectorAll('.waveform-bar');
    const barsToPlay = Math.floor(progress * bars.length);
    
    bars.forEach((bar, index) => {
        if (index < barsToPlay) {
            bar.classList.add('played');
        } else {
            bar.classList.remove('played');
        }
    });
}

function setupSpeech() {
    speech = new SpeechSynthesisUtterance();
    speech.lang = 'it-IT';
    speech.rate = 0.9;
    speech.pitch = 1;
    
    speech.onend = () => {
        currentIndex++;
        if (currentIndex < document.querySelectorAll('h1, h2, p, li').length) {
            readNextElement();
        } else {
            stopReading();
        }
    };
}

function readNextElement() {
    const textElements = document.querySelectorAll('h1, h2, p, li');
    if (textElements[currentIndex]) {
        speech.text = textElements[currentIndex].textContent;
        window.speechSynthesis.speak(speech);
    }
}

function stopReading() {
    isPlaying = false;
    pauseTime = Date.now() - startTime;
    const audioControl = document.getElementById('audioControl');
    audioControl.innerHTML = '<i class="fas fa-headphones"></i><i class="fas fa-play"></i>';
    window.speechSynthesis.cancel();
}

function resumeReading() {
    startTime = Date.now() - pauseTime;
    isPlaying = true;
    const audioControl = document.getElementById('audioControl');
    audioControl.innerHTML = '<i class="fas fa-pause"></i>';
    updateProgress();
    readNextElement();
}

function updateProgress() {
    if (!isPlaying) return;

    const elapsedTime = (Date.now() - startTime) / 1000;
    const progress = Math.min(elapsedTime / totalDuration, 1);
    
    updateWaveform(progress);
    document.getElementById('currentTime').textContent = formatTime(elapsedTime);
    
    if (progress < 1) {
        requestAnimationFrame(updateProgress);
    }
}

function handleWaveformClick(e) {
    if (isDragging) return;
    
    const rect = e.currentTarget.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const progress = x / rect.width;
    
    startTime = Date.now() - (progress * totalDuration * 1000);
    pauseTime = Date.now() - startTime;
    
    updateWaveform(progress);
    currentIndex = Math.floor(progress * document.querySelectorAll('h1, h2, p, li').length);
    
    if (isPlaying) {
        window.speechSynthesis.cancel();
        readNextElement();
        updateProgress();
    }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    setupSpeech();
    createWaveform();
    calculateTotalDuration();

    const waveformContainer = document.querySelector('.waveform-container');
    waveformContainer.addEventListener('click', handleWaveformClick);

    const audioControlContainer = document.querySelector('.audio-control-container');
    const audioControl = document.getElementById('audioControl');
    
    audioControl.addEventListener('click', () => {
        const waveformContainer = document.querySelector('.waveform-container');
        
        if (!isPlaying) {
            waveformContainer.style.display = 'block';
            audioControl.innerHTML = '<i class="fas fa-pause"></i>';
            resumeReading();
        } else {
            audioControl.innerHTML = '<i class="fas fa-headphones"></i><i class="fas fa-play"></i>';
            stopReading();
        }
    });
});


      
</script>


   
</body>
</html>
